window.__require=function t(e,o,n){function r(i,a){if(!o[i]){if(!e[i]){var s=i.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var h=o[i]={exports:{}};e[i][0].call(h.exports,function(t){return r(e[i][1][t]||t)},h,h.exports,t,e,o,n)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({camera:[function(t,e,o){"use strict";cc._RF.push(e,"98ec65D7dRLaKg3MOLvuwBW","camera");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playNode=null,e.gameOverNode=null,e.bgNode=null,e}return r(e,t),e.prototype.start=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.KEY_DOWN,this)},e.prototype.KEY_DOWN=function(t){var e=this.playNode.getPosition(),o=e;switch(t.keyCode){case cc.macro.KEY.left:o=new cc.Vec2(e.x-10,e.y);break;case cc.macro.KEY.right:o=new cc.Vec2(e.x+10,e.y);break;case cc.macro.KEY.up:o=new cc.Vec2(e.x,e.y+10);break;case cc.macro.KEY.down:o=new cc.Vec2(e.x,e.y-10)}this.playNode.setPosition(o)},e.prototype.update=function(){if(0!=this.playNode.active){var t=this.playNode.convertToWorldSpaceAR(new cc.Vec2(0,0)),e=this.bgNode.convertToWorldSpaceAR(new cc.Vec2(0,0)),o=cc.rect(t.x-this.node.parent.width/2,t.y-this.node.parent.height/2,this.node.parent.width,this.node.parent.height),n=cc.rect(e.x,e.y,this.bgNode.width,this.bgNode.height);cc.log(o.toString(),n.toString()),t.x+this.node.parent.width/2>=e.x+this.bgNode.width&&(t.x-=t.x+this.node.parent.width/2-(e.x+this.bgNode.width)),t.y+this.node.parent.height/2>=e.y+this.bgNode.height&&(t.y-=t.y+this.node.parent.height/2-(e.y+this.bgNode.height)),t.y-this.node.parent.height/2<=e.y&&(t.y+=e.y-(t.y-this.node.parent.height/2)),t.x-this.node.parent.width/2<=e.x&&(t.x+=e.x-(t.x-this.node.parent.width/2));var r=this.node.parent.convertToNodeSpaceAR(t);this.node.setPosition(r),this.gameOverNode.setPosition(r),this.gameOverNode.active=!1}else this.gameOverNode.active=!0},c([s(cc.Node)],e.prototype,"playNode",void 0),c([s(cc.Node)],e.prototype,"gameOverNode",void 0),c([s(cc.Node)],e.prototype,"bgNode",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],cell:[function(t,e,o){"use strict";cc._RF.push(e,"d0f1cJgJZJG1LDEmFYydkhY","cell");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hero=null,e.level=1,e}return r(e,t),e.prototype.start=function(){var t=this.node.getChildByName("animation").getComponent(cc.Animation);cc.resources.loadDir("level/v"+this.level,cc.SpriteFrame,function(e,o){var n=cc.AnimationClip.createWithSpriteFrames(o,20);n.name="v2",t.addClip(n),t.play("v2").wrapMode=cc.WrapMode.Loop})},c([s(cc.Node)],e.prototype,"hero",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],fish:[function(t,e,o){"use strict";cc._RF.push(e,"5060afvFnRGNp+258OVw4hW","fish");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hero=null,e.speed=4,e.rotation=0,e.level=1,e}return r(e,t),e.prototype.start=function(){this.hero=this.node.parent.getChildByName("hero"),this.rotation=Math.random()*Math.PI*2;for(var t=this.hero.getComponent("hero").level.toString(3),e=[],o=1;o<t.length+2;o++)e.push(o);var n=this.randomElementByChance(e,e);this.level=Math.pow(3,n-1);var r=this.node.getChildByName("animation").getComponent(cc.Animation);cc.resources.loadDir("level/v"+n,cc.SpriteFrame,function(t,e){var o=cc.AnimationClip.createWithSpriteFrames(e,10);o.name="v2",r.addClip(o),r.play("v2").wrapMode=cc.WrapMode.Loop}),this.changeRotation()},e.prototype.changeRotation=function(){var t=this,e=this.randomNum(2,5);setTimeout(function(){t.rotation=Math.random()*Math.PI*2,t.changeRotation()},1e3*e)},e.prototype.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1+"",10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}},e.prototype.randomElementByChance=function(t,e){if(!t||0==t.length||!e||0==e.length)return null;for(var o=e.reduce(function(t,e){return t+e},0),n=Math.random()*o,r=0,c=e.length;r<c;++r){var i=e[r]||0;if(n<i)return t[r];n-=i}return null},e.prototype.update=function(){this.check_pz(),this.updatePosition()},e.prototype.updatePosition=function(){if(0!=cc.isValid(this.node)){var t=this.node.getPosition(),e=this.rotation,o=t.x+this.speed*Math.cos(e),n=t.y+this.speed*Math.sin(e);Math.PI/2>Math.abs(e)?this.node.scaleX=-1:this.node.scaleX=1;var r=new cc.Vec2(o,n);this.node.setPosition(r);try{if(0==cc.rect(0,0,this.node.parent.width,this.node.parent.height).contains(r)){if(0==cc.isValid(this.node))return;this.node.removeFromParent(!1),this.node.destroy()}}catch(c){}}},e.prototype.check_pz=function(){if(0!=cc.isValid(this.node)&&this.hero&&0!=this.hero.active&&this.hero.getPosition().sub(this.node.getPosition()).mag()<80){cc.randomRangeInt;var t=this.hero.getComponent("hero").level;if(cc.log("fish level:"+this.level,"hero level:"+t),t<this.level)return cc.log("\u88ab\u7b49\u7ea7\u9ad8\u7684\u5403\u6389\u4e86"),void this.hero.getComponent("hero").updateLevel(-Math.ceil(t/2));this.hero.getComponent("hero").updateLevel(this.level),this.node.removeFromParent(!0),this.node.destroy()}},c([s(cc.Node)],e.prototype,"hero",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"1dada8Opb5DJ6Bx5C79/BZh","game");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.hero=null,e.rotation=0,e.speed=2,e}return r(e,t),e.prototype.onLoad=function(){cc.log("onLoad"),cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){var t=this;setInterval(function(){t.addFishList()},2e3),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.TOUCH_MOVE,this),this.node.on(cc.Node.EventType.TOUCH_START,this.TOUCH_START,this)},e.prototype.TOUCH_START=function(t){this.startPostion=t.getLocation()},e.prototype.TOUCH_MOVE=function(t){var e=t.getLocation().subSelf(this.startPostion),o=new cc.Vec2(1,0).signAngle(e);this.hero.getComponent("hero").rotation=o},e.prototype.addFishList=function(){if(!(this.node.childrenCount>20))for(var t=this.randomNum(10,20),e=0;e<t;e++)this.addFish()},e.prototype.addFish=function(){var t=cc.instantiate(this.prefab);t.x=this.randomNum(0,this.node.width),t.y=this.randomNum(0,this.node.height),this.node.addChild(t)},e.prototype.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1+"",10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}},e.prototype.update=function(){},c([s(cc.Prefab)],e.prototype,"prefab",void 0),c([s(cc.Node)],e.prototype,"hero",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],global:[function(t,e,o){"use strict";cc._RF.push(e,"4bd15wemFBKpItD/F3HeoLs","global"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=(n.ccclass,n.property,function(){function t(){this.maxLevel=2,this.progress=0}return t.prototype.loadAnimation=function(){for(var t=1;t<=this.maxLevel;t++)cc.resources.loadDir("level/v"+t,cc.SpriteFrame,function(t,e){var o=cc.AnimationClip.createWithSpriteFrames(e,20);o.name="v2",cc.log(o)})},t}());o.default=r,cc._RF.pop()},{}],hero:[function(t,e,o){"use strict";cc._RF.push(e,"f5b53TxVqlBhLHiZ5AQwV9n","hero");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab=null,e.level=1,e.text="hello",e.rotation=0,e.speed=6,e}return r(e,t),e.prototype.updateLevel=function(t){if(this.node.removeAllChildren(),this.level=this.level+t,this.level<=0)return cc.log("\u6e38\u620f\u7ed3\u675f"),void(this.node.active=!1);for(var e=this.level.toString(3),o=e.length;o>0;o--)for(var n=e[e.length-o],r=0;r<parseInt(n);r++){var c=cc.instantiate(this.prefab);c.getComponent("cell").level=o,this.node.addChild(c);var i=this.randomNum(-50,50),a=this.randomNum(-50,50);c.setPosition(new cc.Vec2(i,a))}},e.prototype.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1+"",10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}},e.prototype.start=function(){this.updateLevel(0)},e.prototype.TOUCH_START=function(t){cc.log(t),this.startPostion=t.getLocation()},e.prototype.TOUCH_MOVE=function(t){cc.log(t);var e=t.getLocation().subSelf(this.startPostion),o=e.y/e.x;this.rotation=Math.asin(o)},e.prototype.update=function(){this.updatePosition()},e.prototype.updatePosition=function(){var t=this.node.getPosition(),e=this.rotation,o=t.x+this.speed*Math.cos(e),n=t.y+this.speed*Math.sin(e);Math.PI/2>Math.abs(e)?this.node.scaleX=-1:this.node.scaleX=1;var r=new cc.Vec2(o,n);cc.rect(50,50,this.node.parent.width-100,this.node.parent.height-100).contains(r)&&this.node.setPosition(r)},c([s(cc.Prefab)],e.prototype,"prefab",void 0),c([s(cc.Integer)],e.prototype,"level",void 0),c([s],e.prototype,"text",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],player:[function(t,e,o){"use strict";cc._RF.push(e,"7b2cdRDe5JNVJwdlAnm8HBg","player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var r,c=arguments.length,i=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(c<3?r(i):c>3?r(e,o,i):r(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},c([s(cc.Label)],e.prototype,"label",void 0),c([s],e.prototype,"text",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}]},{},["camera","cell","fish","game","global","hero","player"]);